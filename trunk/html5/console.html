<!DOCTYPE html>
<html>
  <head>
    <!--meta charset="windows-1252"></meta-->
    <title>NMEA Console Data</title>
    <link rel="stylesheet" href="css/stylesheet.css" type="text/css"/>
    <style type="text/css">
      .displayCanvas {
        border: 1px solid #9C9898;
        opacity:0.75;
      }
    </style>
    <script type="text/javascript" src="js/analog.display/AnalogDisplay.js"></script>
    <script type="text/javascript" src="js/boat.overview/BoatOverview.js"></script>
    <script type="text/javascript" src="js/temperature/Thermometer.js"></script>
    <script type="text/javascript" src="js/direction/Direction.js"></script>
    <script type="text/javascript" src="js/console.js"></script>
    <script type="text/javascript">
  var showMap = function()
  {
    document.getElementById('map').style.display = 'inline';
    document.getElementById('showMap').style.textDecoration = 'none';
    document.getElementById('displays').style.display = 'none';
    document.getElementById('showDisplays').style.textDecoration = 'underline';
    document.getElementById('showOverview').style.textDecoration = 'underline';
    document.getElementById('overview').style.display = 'none';
  };  
  var showDisplays = function()
  {
    document.getElementById('map').style.display = 'none';
    document.getElementById('showMap').style.textDecoration = 'underline';
    document.getElementById('displays').style.display = 'inline';
    document.getElementById('showDisplays').style.textDecoration = 'none';
    document.getElementById('showOverview').style.textDecoration = 'underline';
    document.getElementById('overview').style.display = 'none';
  };  
  var showOverview = function()
  {
    document.getElementById('map').style.display = 'none';
    document.getElementById('showMap').style.textDecoration = 'underline';
    document.getElementById('displays').style.display = 'none';
    document.getElementById('showDisplays').style.textDecoration = 'underline';
    document.getElementById('showOverview').style.textDecoration = 'none';
    document.getElementById('overview').style.display = 'inline';
  };  
  
  window.onload = function()
  {
    init();
//  console.log("Evaluating window size");
    resizeComponents();
  };
  
  window.onresize = function()
  {
//  console.log("Re-evaluating window size");
    resizeComponents();
  };
  
  var resizeComponents = function()
  {
    var ww = window.innerWidth;
    var wh = window.innerHeight;
    
    var totalWidth = TOTAL_WIDTH; // in console.js
    
    // Canvases & iFrame
    document.getElementById('map-frame').height = wh * 0.6;
    document.getElementById('overviewCanvas').height = wh * 0.6;
    // BSP
    document.getElementById('bspCanvas').width = 240 * (Math.min(ww, totalWidth) / totalWidth);
    document.getElementById('bspCanvas').height = 120 * (Math.min(ww, totalWidth) / totalWidth);
    // HDG
    document.getElementById('hdgCanvas').width = 240 * (Math.min(ww, totalWidth) / totalWidth);
    document.getElementById('hdgCanvas').height = 220 * (Math.min(ww, totalWidth) / totalWidth);
    // TWD
    document.getElementById('twdCanvas').width = 240 * (Math.min(ww, totalWidth) / totalWidth);
    document.getElementById('twdCanvas').height = 220 * (Math.min(ww, totalWidth) / totalWidth);
    // TWS
    document.getElementById('twsCanvas').width = 240 * (Math.min(ww, totalWidth) / totalWidth);
    document.getElementById('twsCanvas').height = 220 * (Math.min(ww, totalWidth) / totalWidth);
    // TEMP
    document.getElementById('tmpCanvas').width = 100 * (Math.min(ww, totalWidth) / totalWidth);
    document.getElementById('tmpCanvas').height = 240 * (Math.min(ww, totalWidth) / totalWidth);
    
    // Displays inside the canvases        
    resizeDisplays(ww); 
  };
    </script>
  </head>
  <body>
    <table width="98%">
      <tr>
        <td><h2 style="font-size: 12pt; font-family: Verdana, Arial, Helvetica, Geneva, Swiss, SunSans-Regular">NMEA Console Data</h2></td>
      </tr>
    </table>
    <small><button id="showMap" onclick="showMap();">Map</button>&nbsp;<button id="showDisplays" onclick="showDisplays();">Displays</button>&nbsp;<button id="showOverview" onclick="showOverview();">Overview</button></small>
    <div id="map" style="display: inline;">
      <p align="center">
        <iframe id="map-frame" src="worldmap.html" height="500" title="The map" style="width: 90%;"></iframe>
      </p>
      <input type="button" value="Reload Map" onClick="reloadMap();"/>
      <div id="elapsed" style="font-size: 10pt; font-family: Verdana, Arial, Helvetica, Geneva, Swiss, SunSans-Regular"></div>
    </div>
    <div id="displays" style="display: none;">
      <!-- Analog Displays -->
      <table align="center">
        <tr>
          <td align="center">Boat Speed in knots</td>
          <td align="center">Heading in &deg;</td>
          <td align="center">Wind Dir in &deg;</td>
          <td align="center">Wind in knots</td>
          <td align="center">Water&deg;C</td>
        </tr>
        <tr>
          <td align="center" valign="top">
            <canvas id="bspCanvas" width="240" height="120" class="displayCanvas"></canvas>
          </td>
          <td align="center" valign="top">
            <canvas id="hdgCanvas" width="240" height="220" class="displayCanvas"></canvas>
          </td>
          <td align="center" valign="top">
            <canvas id="twdCanvas" width="240" height="220" class="displayCanvas"></canvas>
          </td>
          <td align="center" valign="top">
            <canvas id="twsCanvas" width="240" height="220" class="displayCanvas"></canvas>
          </td>
          <td align="center" valign="top">
            <canvas id="tmpCanvas" width="100" height="240" class="displayCanvas"></canvas>
          </td>
        </tr>
      </table>   
    </div>
    <div id="overview" style="display: none;">
      <p align="center">
        <canvas id="overviewCanvas" height="500" width="600" class="displayCanvas"></canvas>
      </p>
    </div>
    <div id="err-mess"></div>
  </body>
</html>
